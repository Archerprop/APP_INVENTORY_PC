<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="static/styles/bootstrap.min.css"
      th:href="@{/styles/bootstrap.min.css}"
      rel="stylesheet"
    />
    <link
      href="static/styles/styles.css"
      th:href="@{/styles/styles.css}"
      rel="stylesheet"
    />
    <script
      src="static/js/sweetalert2.all.min.js"
      th:src="@{/js/sweetalert2.all.min.js}"
    ></script>
    <title>App Inventory PC</title>
  </head>
  <body>
    <header th:insert="fragments/menu :: barra-menu"></header>
    <div class="container w-75 mt-5 rounded shadow">
      <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="home-tab"
            data-bs-toggle="tab"
            data-bs-target="#agregar"
            type="button"
            role="tab"
            aria-controls="home"
            aria-selected="true"
          >
            Agregar articulo
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="profile-tab"
            data-bs-toggle="tab"
            data-bs-target="#lista"
            type="button"
            role="tab"
            aria-controls="profile"
            aria-selected="false"
          >
            Ver articulos agregados
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane fade show active"
          id="agregar"
          role="tabpanel"
          aria-labelledby="home-tab"
        >
          <form
            th:action="@{/gestor}"
            th:if="${param.none}"
            method="post"
            th:object="${articulo}"
          >
            <div class="mb-3">
              <label for="serial">Serial</label>
              <input
                type="text"
                class="form-control"
                id="serial"
                th:field="*{serial}"
                maxlength="5"
                minlength="5"
              />
            </div>
            <div class="mb-3">
              <label for="nombre" class="form-label">Nombre</label>
              <input
                type="text"
                class="form-control"
                id="nombre"
                th:field="*{nombre}"
              />
            </div>
            <div class="d-grid">
              <button type="submit" class="btn btn-primary">Agregar</button>
            </div>
          </form>
          <form
            th:action="@{/gestor}"
            th:if="${param.old}"
            method="post"
            th:object="${articulo}"
          >
            <div class="mb-3">
              <label for="stock" class="form-label">Stock</label>
              <input
                type="number"
                class="form-control"
                id="stock"
                th:field="*{stock}"
              />
            </div>
            <div class="mb-3">
              <label for="precioU" class="form-label">Precio Unitario</label>
              <input
                type="number"
                class="form-control"
                id="precioU"
                th:field="*{precioU}"
              />
            </div>
            <div class="d-grid">
              <button type="submit" class="btn btn-primary">Agregar</button>
            </div>
          </form>
          <form
            th:action="@{/gestor}"
            th:if="${param.new}"
            method="post"
            th:object="${articulo}"
          >
            <div class="mb-3">
              <label for="serial">Serial</label>
              <input
                type="text"
                class="form-control"
                id="serial"
                th:field="*{serial}"
                maxlength="5"
                minlength="5"
              />
            </div>
            <div class="mb-3">
              <label for="nombre" class="form-label">Nombre</label>
              <input
                type="text"
                class="form-control"
                id="nombre"
                th:field="*{nombre}"
              />
            </div>
            <div class="mb-3">
              <label for="stock" class="form-label">Stock</label>
              <input
                type="number"
                class="form-control"
                id="stock"
                th:field="*{stock}"
              />
            </div>
            <div class="mb-3">
              <label for="precioU" class="form-label">Precio Unitario</label>
              <input
                type="number"
                class="form-control"
                id="precioU"
                th:field="*{precioU}"
              />
            </div>
            <div class="d-grid">
              <button type="submit" class="btn btn-primary">Agregar</button>
            </div>
          </form>
        </div>
        <div
          class="tab-pane fade"
          id="lista"
          role="tabpanel"
          aria-labelledby="profile-tab"
        >
          <table class="table table-striped table-bordered m-3">
            <thead class="table-dark">
              <tr>
                <th>Nombre</th>
                <th>Stock</th>
                <th>Precio Unitario</th>
                <th>Precio Bruto</th>
              </tr>
            </thead>
            <tbody>
              <tr th:each="dato : ${articulos}">
                <td th:text="${dato.nombre}">ND</td>
                <td th:text="${dato.stock}">ND</td>
                <td th:text="${dato.precioU}">ND</td>
                <td th:text="${dato.precioB}">ND</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <script
      src="static/js/bootstrap.bundle.min.js"
      th:src="@{/js/bootstrap.bundle.min.js}"
    ></script>
  </body>
  <script
    src="static/js/jquery-3.6.0.min.js"
    th:src="@{/js/jquery-3.6.0.min.js}"
  ></script>
  <script th:if="${param.success}">
    Swal.fire({
      title: "Articulo agregado",
      text: "El articulo se agrego correctamente",
      icon: "success",
      showConfirmButton: false,
      timer: 2000,
      toast: true,
      position: "top-end",
    }).then(() => {
      window.location.href = "/gestor?none";
    });
  </script>
</html>
